package es.reaktor.reaktor.repository;

import es.reaktor.models.Malware;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;

import java.util.List;

public interface MalwareRepository extends JpaRepository<Malware, String>
{

    @Query(value =  "SELECT m.name, m.description, COALESCE(COUNT(mm.id_malware), 0) " +
                    "FROM malware AS m " +
                    "LEFT JOIN motherboard_malware AS mm ON m.name = mm.id_malware " +
                    "GROUP BY m.name"
            , nativeQuery = true)
    List<Object[]> malwareWeb();
}
