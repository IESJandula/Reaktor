package es.monitoringserver.monitoringserver.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Modifying;
import org.springframework.data.jpa.repository.Query;

import es.monitoringserver.models.MotherboardMalware;
import es.monitoringserver.models.Id.MotherboardMalwareId;

import java.util.List;

public interface IMotherboardMalwareRepository extends JpaRepository<MotherboardMalware, MotherboardMalwareId>
{
    Long countByMotherboardMalwareId_MotherBoardSerialNumber(String motherBoardSerialNumber);

    @Query("select m.motherBoardSerialNumber.motherBoardSerialNumber from MotherboardMalware m where m.name.name= ?1")
    List<String> findIdMotherboardOfMalware(String idMalware);

    @Modifying
    @Query("delete from MotherboardMalware m where m.motherboardMalwareId.motherBoardSerialNumber = ?1")
    void deleteByMotherboardMalwareId_SerialNumber(String motherBoardSerialNumber);

}
